sudo: required
dist: trusty
group: edge

notifications:
  email: false

services:
- docker

env:
- TTIO_BUILD_ENV=production
- secure: "lMsPU2PYIh25uF18C3FiG9KKGxXPPuI6iYXr3V8OlaAaWvNfI3cNiVVlqyoxrYSLbbur2najwrnCQKjZHs0jA2OPCVXTKDk1l5De7GOhJwQDkUBA71629RfVLUxCg/9V6RKeJ5ClXJXE3ly52MR4iNdYuvDZzYqw3y5lFMd8ywuWIuZ+x7eSKmJSHJxkbC2AKSXDZL9Co1vBBYzeSy6Z/7/VYSbKkNU/+kM3cdzXHhSbiW+sGy6RTcKdcOW+RpFHCL94MgXWl5tpAjnJGS07rzNixZ9nq7wCM66mpDQKLXuO9+hm1bhRgPW3nNmjqz49sAr66ujSjdOdcNMrYijwf6SBA2TCp9Zb9pdLW7848EsnjMflrYQrxh7cQeGyXgTeyt1ruzIp0L4lWvg/6CLUQTOgBVn4gOJ4XaTaraSldyke6VGptck6Ua1U0ZHnf0L5nRK7YLPePytqE6qIuTmgewjp3ti7YKVjSUxNqql5U53NnL08Zm3EOoTIMbZ07PYMwTgqsfBNqYFFXSCkwF4f2Mg49j2ic0jhHwe0tm9CsTKpemb09ODo4XjenCZx6dp7W6eIglMn3NxJyOV7v590Xlmmwzq+rtnkJzUBmnIjXRxfhPorC5/MGJVMzZhf0uXcXAHYbhXP1R8DLpIHKjm8rUg8MzCVmj4g7bb45ljlaUw="

before_install:
- docker login -p ${TTIO_DOCKER_PASSWORD} -u bot https://docker.ttio.cloud:5000

script:
- ./build.sh

deploy:
  provider: script
  skip_cleanup: true

  script: ./push.sh

  on:
    tags: true
